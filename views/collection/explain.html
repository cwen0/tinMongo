{{define "collection/explain"}}
{{template "Tpl/header" .}}
{{template "Tpl/headerSecond" .}}
{{template "Tpl/sidebar" .}}

{{set . "navigation" "查询分析" }}
{{set . "active" "explain" }} 
<div class="admin-content" id="explain" >
	{{template "Tpl/dbNavigationOne" .}}
  	{{template "Tpl/collectionNavigationTwo" .}}
  	<div class="am-g am-g-fixed am-margin-top">
  		<div >
            <a href="https://docs.mongodb.com/manual/reference/mongodb-extended-json/#mongodb-extended-json" target="_blank" ><i class="am-icon-angle-double-right"></i>&nbsp;&nbsp; Enter quieries in Extended JSON(strict mode) </a>
        </div>
        <div class="am-form">
            <fieldset>
	              <div class="am-form-group">
	                  <textarea class="" rows="3" id="doc-ta-1" v-model="item.query" ></textarea>
	              </div>
                  <div class="am-alert a am-alert-warning" id = "msg_alert" v-show="has_msg" style="display: none" >
                    <button type="button" v-on:click="has_msg = false" class="am-close" >&times;</button>
                    <p> ${ alert_msg } </p>
                  </div>
                   <!-- <div class="am-alert am-alert-success"  style="display: none" v-show="insert_success" >
                      <button type="button" v-on:click="insert_success = false" class="am-close">&times;</button>
                    <p>Insert success !!</p>
                  </div> -->
                    <div class="am-form-group">
                        <button type="button" class="am-btn am-btn-default am-btn-block" v-on:click="execAction" id="exec_btn">执行</button>
                    </div>
                </fieldset>
          </div>
  	</div>
    <div class="am-g am-g-fixed am-margin-top">
          <fieldset>
            <div class="me-result-panel am-panel am-panel-default" v-show="show_result" style="display: none">
                  <div class="me-result-panel am-panel am-panel-default" >
                    <div class="am-panel-hd">Query: ${ item.query } </div>
                    <div class="am-panel-bd">
                      <pre>${ result}</pre>
                    </div>
                  </div>
              </div>
            </fieldset>
    </div>
</div>
</div>

{{template "Tpl/footer" .}}
<script type="text/javascript" src="/public/js/vue.js"></script>
<script type="text/javascript" src="/public/js/vue-resource.js"></script>
<script type="text/javascript">
var dbName = {{.DBName}};
var collection = {{.Collection}}
</script>
<script type="text/javascript" src="/public/js/collection/explain.js"></script>
</body> 
</html>
{{end}}